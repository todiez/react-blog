{"ast":null,"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.MongoWriteConcernError = exports.MongoServerSelectionError = exports.MongoSystemError = exports.MongoMissingDependencyError = exports.MongoMissingCredentialsError = exports.MongoCompatibilityError = exports.MongoInvalidArgumentError = exports.MongoParseError = exports.MongoNetworkTimeoutError = exports.MongoNetworkError = exports.MongoTopologyClosedError = exports.MongoCursorExhaustedError = exports.MongoServerClosedError = exports.MongoCursorInUseError = exports.MongoUnexpectedServerResponseError = exports.MongoGridFSChunkError = exports.MongoGridFSStreamError = exports.MongoTailableCursorError = exports.MongoChangeStreamError = exports.MongoGCPError = exports.MongoAzureError = exports.MongoOIDCError = exports.MongoAWSError = exports.MongoKerberosError = exports.MongoExpiredSessionError = exports.MongoTransactionError = exports.MongoNotConnectedError = exports.MongoDecompressionError = exports.MongoBatchReExecutionError = exports.MongoRuntimeError = exports.MongoAPIError = exports.MongoDriverError = exports.MongoServerError = exports.MongoError = exports.MongoErrorLabel = exports.GET_MORE_RESUMABLE_CODES = exports.MONGODB_ERROR_CODES = exports.NODE_IS_RECOVERING_ERROR_MESSAGE = exports.LEGACY_NOT_PRIMARY_OR_SECONDARY_ERROR_MESSAGE = exports.LEGACY_NOT_WRITABLE_PRIMARY_ERROR_MESSAGE = void 0;\nexports.isNetworkErrorBeforeHandshake = isNetworkErrorBeforeHandshake;\nexports.needsRetryableWriteLabel = needsRetryableWriteLabel;\nexports.isRetryableWriteError = isRetryableWriteError;\nexports.isRetryableReadError = isRetryableReadError;\nexports.isNodeShuttingDownError = isNodeShuttingDownError;\nexports.isSDAMUnrecoverableError = isSDAMUnrecoverableError;\nexports.isNetworkTimeoutError = isNetworkTimeoutError;\nexports.isResumableError = isResumableError;\n/** @internal */\nconst kErrorLabels = Symbol('errorLabels');\n/**\n * @internal\n * The legacy error message from the server that indicates the node is not a writable primary\n * https://github.com/mongodb/specifications/blob/b07c26dc40d04ac20349f989db531c9845fdd755/source/server-discovery-and-monitoring/server-discovery-and-monitoring.rst#not-writable-primary-and-node-is-recovering\n */\nexports.LEGACY_NOT_WRITABLE_PRIMARY_ERROR_MESSAGE = new RegExp('not master', 'i');\n/**\n * @internal\n * The legacy error message from the server that indicates the node is not a primary or secondary\n * https://github.com/mongodb/specifications/blob/b07c26dc40d04ac20349f989db531c9845fdd755/source/server-discovery-and-monitoring/server-discovery-and-monitoring.rst#not-writable-primary-and-node-is-recovering\n */\nexports.LEGACY_NOT_PRIMARY_OR_SECONDARY_ERROR_MESSAGE = new RegExp('not master or secondary', 'i');\n/**\n * @internal\n * The error message from the server that indicates the node is recovering\n * https://github.com/mongodb/specifications/blob/b07c26dc40d04ac20349f989db531c9845fdd755/source/server-discovery-and-monitoring/server-discovery-and-monitoring.rst#not-writable-primary-and-node-is-recovering\n */\nexports.NODE_IS_RECOVERING_ERROR_MESSAGE = new RegExp('node is recovering', 'i');\n/** @internal MongoDB Error Codes */\nexports.MONGODB_ERROR_CODES = Object.freeze({\n  HostUnreachable: 6,\n  HostNotFound: 7,\n  AuthenticationFailed: 18,\n  NetworkTimeout: 89,\n  ShutdownInProgress: 91,\n  PrimarySteppedDown: 189,\n  ExceededTimeLimit: 262,\n  SocketException: 9001,\n  NotWritablePrimary: 10107,\n  InterruptedAtShutdown: 11600,\n  InterruptedDueToReplStateChange: 11602,\n  NotPrimaryNoSecondaryOk: 13435,\n  NotPrimaryOrSecondary: 13436,\n  StaleShardVersion: 63,\n  StaleEpoch: 150,\n  StaleConfig: 13388,\n  RetryChangeStream: 234,\n  FailedToSatisfyReadPreference: 133,\n  CursorNotFound: 43,\n  LegacyNotPrimary: 10058,\n  WriteConcernFailed: 64,\n  NamespaceNotFound: 26,\n  IllegalOperation: 20,\n  MaxTimeMSExpired: 50,\n  UnknownReplWriteConcern: 79,\n  UnsatisfiableWriteConcern: 100,\n  Reauthenticate: 391,\n  ReadConcernMajorityNotAvailableYet: 134\n});\n// From spec@https://github.com/mongodb/specifications/blob/f93d78191f3db2898a59013a7ed5650352ef6da8/source/change-streams/change-streams.rst#resumable-error\nexports.GET_MORE_RESUMABLE_CODES = new Set([exports.MONGODB_ERROR_CODES.HostUnreachable, exports.MONGODB_ERROR_CODES.HostNotFound, exports.MONGODB_ERROR_CODES.NetworkTimeout, exports.MONGODB_ERROR_CODES.ShutdownInProgress, exports.MONGODB_ERROR_CODES.PrimarySteppedDown, exports.MONGODB_ERROR_CODES.ExceededTimeLimit, exports.MONGODB_ERROR_CODES.SocketException, exports.MONGODB_ERROR_CODES.NotWritablePrimary, exports.MONGODB_ERROR_CODES.InterruptedAtShutdown, exports.MONGODB_ERROR_CODES.InterruptedDueToReplStateChange, exports.MONGODB_ERROR_CODES.NotPrimaryNoSecondaryOk, exports.MONGODB_ERROR_CODES.NotPrimaryOrSecondary, exports.MONGODB_ERROR_CODES.StaleShardVersion, exports.MONGODB_ERROR_CODES.StaleEpoch, exports.MONGODB_ERROR_CODES.StaleConfig, exports.MONGODB_ERROR_CODES.RetryChangeStream, exports.MONGODB_ERROR_CODES.FailedToSatisfyReadPreference, exports.MONGODB_ERROR_CODES.CursorNotFound]);\n/** @public */\nexports.MongoErrorLabel = Object.freeze({\n  RetryableWriteError: 'RetryableWriteError',\n  TransientTransactionError: 'TransientTransactionError',\n  UnknownTransactionCommitResult: 'UnknownTransactionCommitResult',\n  ResumableChangeStreamError: 'ResumableChangeStreamError',\n  HandshakeError: 'HandshakeError',\n  ResetPool: 'ResetPool',\n  PoolRequstedRetry: 'PoolRequstedRetry',\n  InterruptInUseConnections: 'InterruptInUseConnections',\n  NoWritesPerformed: 'NoWritesPerformed'\n});\nfunction isAggregateError(e) {\n  return e != null && typeof e === 'object' && 'errors' in e && Array.isArray(e.errors);\n}\n/**\n * @public\n * @category Error\n *\n * @privateRemarks\n * mongodb-client-encryption has a dependency on this error, it uses the constructor with a string argument\n */\nclass MongoError extends Error {\n  /**\n   * **Do not use this constructor!**\n   *\n   * Meant for internal use only.\n   *\n   * @remarks\n   * This class is only meant to be constructed within the driver. This constructor is\n   * not subject to semantic versioning compatibility guarantees and may change at any time.\n   *\n   * @public\n   **/\n  constructor(message, options) {\n    super(message, options);\n    this[kErrorLabels] = new Set();\n  }\n  /** @internal */\n  static buildErrorMessage(e) {\n    if (typeof e === 'string') {\n      return e;\n    }\n    if (isAggregateError(e) && e.message.length === 0) {\n      return e.errors.length === 0 ? 'AggregateError has an empty errors array. Please check the `cause` property for more information.' : e.errors.map(({\n        message\n      }) => message).join(', ');\n    }\n    return e != null && typeof e === 'object' && 'message' in e && typeof e.message === 'string' ? e.message : 'empty error message';\n  }\n  get name() {\n    return 'MongoError';\n  }\n  /** Legacy name for server error responses */\n  get errmsg() {\n    return this.message;\n  }\n  /**\n   * Checks the error to see if it has an error label\n   *\n   * @param label - The error label to check for\n   * @returns returns true if the error has the provided error label\n   */\n  hasErrorLabel(label) {\n    return this[kErrorLabels].has(label);\n  }\n  addErrorLabel(label) {\n    this[kErrorLabels].add(label);\n  }\n  get errorLabels() {\n    return Array.from(this[kErrorLabels]);\n  }\n}\nexports.MongoError = MongoError;\n/**\n * An error coming from the mongo server\n *\n * @public\n * @category Error\n */\nclass MongoServerError extends MongoError {\n  /**\n   * **Do not use this constructor!**\n   *\n   * Meant for internal use only.\n   *\n   * @remarks\n   * This class is only meant to be constructed within the driver. This constructor is\n   * not subject to semantic versioning compatibility guarantees and may change at any time.\n   *\n   * @public\n   **/\n  constructor(message) {\n    super(message.message || message.errmsg || message.$err || 'n/a');\n    if (message.errorLabels) {\n      this[kErrorLabels] = new Set(message.errorLabels);\n    }\n    this.errorResponse = message;\n    for (const name in message) {\n      if (name !== 'errorLabels' && name !== 'errmsg' && name !== 'message' && name !== 'errorResponse') {\n        this[name] = message[name];\n      }\n    }\n  }\n  get name() {\n    return 'MongoServerError';\n  }\n}\nexports.MongoServerError = MongoServerError;\n/**\n * An error generated by the driver\n *\n * @public\n * @category Error\n */\nclass MongoDriverError extends MongoError {\n  /**\n   * **Do not use this constructor!**\n   *\n   * Meant for internal use only.\n   *\n   * @remarks\n   * This class is only meant to be constructed within the driver. This constructor is\n   * not subject to semantic versioning compatibility guarantees and may change at any time.\n   *\n   * @public\n   **/\n  constructor(message, options) {\n    super(message, options);\n  }\n  get name() {\n    return 'MongoDriverError';\n  }\n}\nexports.MongoDriverError = MongoDriverError;\n/**\n * An error generated when the driver API is used incorrectly\n *\n * @privateRemarks\n * Should **never** be directly instantiated\n *\n * @public\n * @category Error\n */\nclass MongoAPIError extends MongoDriverError {\n  /**\n   * **Do not use this constructor!**\n   *\n   * Meant for internal use only.\n   *\n   * @remarks\n   * This class is only meant to be constructed within the driver. This constructor is\n   * not subject to semantic versioning compatibility guarantees and may change at any time.\n   *\n   * @public\n   **/\n  constructor(message, options) {\n    super(message, options);\n  }\n  get name() {\n    return 'MongoAPIError';\n  }\n}\nexports.MongoAPIError = MongoAPIError;\n/**\n * An error generated when the driver encounters unexpected input\n * or reaches an unexpected/invalid internal state\n *\n * @privateRemarks\n * Should **never** be directly instantiated.\n *\n * @public\n * @category Error\n */\nclass MongoRuntimeError extends MongoDriverError {\n  /**\n   * **Do not use this constructor!**\n   *\n   * Meant for internal use only.\n   *\n   * @remarks\n   * This class is only meant to be constructed within the driver. This constructor is\n   * not subject to semantic versioning compatibility guarantees and may change at any time.\n   *\n   * @public\n   **/\n  constructor(message, options) {\n    super(message, options);\n  }\n  get name() {\n    return 'MongoRuntimeError';\n  }\n}\nexports.MongoRuntimeError = MongoRuntimeError;\n/**\n * An error generated when a batch command is re-executed after one of the commands in the batch\n * has failed\n *\n * @public\n * @category Error\n */\nclass MongoBatchReExecutionError extends MongoAPIError {\n  /**\n   * **Do not use this constructor!**\n   *\n   * Meant for internal use only.\n   *\n   * @remarks\n   * This class is only meant to be constructed within the driver. This constructor is\n   * not subject to semantic versioning compatibility guarantees and may change at any time.\n   *\n   * @public\n   **/\n  constructor(message = 'This batch has already been executed, create new batch to execute') {\n    super(message);\n  }\n  get name() {\n    return 'MongoBatchReExecutionError';\n  }\n}\nexports.MongoBatchReExecutionError = MongoBatchReExecutionError;\n/**\n * An error generated when the driver fails to decompress\n * data received from the server.\n *\n * @public\n * @category Error\n */\nclass MongoDecompressionError extends MongoRuntimeError {\n  /**\n   * **Do not use this constructor!**\n   *\n   * Meant for internal use only.\n   *\n   * @remarks\n   * This class is only meant to be constructed within the driver. This constructor is\n   * not subject to semantic versioning compatibility guarantees and may change at any time.\n   *\n   * @public\n   **/\n  constructor(message) {\n    super(message);\n  }\n  get name() {\n    return 'MongoDecompressionError';\n  }\n}\nexports.MongoDecompressionError = MongoDecompressionError;\n/**\n * An error thrown when the user attempts to operate on a database or collection through a MongoClient\n * that has not yet successfully called the \"connect\" method\n *\n * @public\n * @category Error\n */\nclass MongoNotConnectedError extends MongoAPIError {\n  /**\n   * **Do not use this constructor!**\n   *\n   * Meant for internal use only.\n   *\n   * @remarks\n   * This class is only meant to be constructed within the driver. This constructor is\n   * not subject to semantic versioning compatibility guarantees and may change at any time.\n   *\n   * @public\n   **/\n  constructor(message) {\n    super(message);\n  }\n  get name() {\n    return 'MongoNotConnectedError';\n  }\n}\nexports.MongoNotConnectedError = MongoNotConnectedError;\n/**\n * An error generated when the user makes a mistake in the usage of transactions.\n * (e.g. attempting to commit a transaction with a readPreference other than primary)\n *\n * @public\n * @category Error\n */\nclass MongoTransactionError extends MongoAPIError {\n  /**\n   * **Do not use this constructor!**\n   *\n   * Meant for internal use only.\n   *\n   * @remarks\n   * This class is only meant to be constructed within the driver. This constructor is\n   * not subject to semantic versioning compatibility guarantees and may change at any time.\n   *\n   * @public\n   **/\n  constructor(message) {\n    super(message);\n  }\n  get name() {\n    return 'MongoTransactionError';\n  }\n}\nexports.MongoTransactionError = MongoTransactionError;\n/**\n * An error generated when the user attempts to operate\n * on a session that has expired or has been closed.\n *\n * @public\n * @category Error\n */\nclass MongoExpiredSessionError extends MongoAPIError {\n  /**\n   * **Do not use this constructor!**\n   *\n   * Meant for internal use only.\n   *\n   * @remarks\n   * This class is only meant to be constructed within the driver. This constructor is\n   * not subject to semantic versioning compatibility guarantees and may change at any time.\n   *\n   * @public\n   **/\n  constructor(message = 'Cannot use a session that has ended') {\n    super(message);\n  }\n  get name() {\n    return 'MongoExpiredSessionError';\n  }\n}\nexports.MongoExpiredSessionError = MongoExpiredSessionError;\n/**\n * A error generated when the user attempts to authenticate\n * via Kerberos, but fails to connect to the Kerberos client.\n *\n * @public\n * @category Error\n */\nclass MongoKerberosError extends MongoRuntimeError {\n  /**\n   * **Do not use this constructor!**\n   *\n   * Meant for internal use only.\n   *\n   * @remarks\n   * This class is only meant to be constructed within the driver. This constructor is\n   * not subject to semantic versioning compatibility guarantees and may change at any time.\n   *\n   * @public\n   **/\n  constructor(message) {\n    super(message);\n  }\n  get name() {\n    return 'MongoKerberosError';\n  }\n}\nexports.MongoKerberosError = MongoKerberosError;\n/**\n * A error generated when the user attempts to authenticate\n * via AWS, but fails\n *\n * @public\n * @category Error\n */\nclass MongoAWSError extends MongoRuntimeError {\n  /**\n   * **Do not use this constructor!**\n   *\n   * Meant for internal use only.\n   *\n   * @remarks\n   * This class is only meant to be constructed within the driver. This constructor is\n   * not subject to semantic versioning compatibility guarantees and may change at any time.\n   *\n   * @public\n   **/\n  constructor(message, options) {\n    super(message, options);\n  }\n  get name() {\n    return 'MongoAWSError';\n  }\n}\nexports.MongoAWSError = MongoAWSError;\n/**\n * A error generated when the user attempts to authenticate\n * via OIDC callbacks, but fails.\n *\n * @public\n * @category Error\n */\nclass MongoOIDCError extends MongoRuntimeError {\n  /**\n   * **Do not use this constructor!**\n   *\n   * Meant for internal use only.\n   *\n   * @remarks\n   * This class is only meant to be constructed within the driver. This constructor is\n   * not subject to semantic versioning compatibility guarantees and may change at any time.\n   *\n   * @public\n   **/\n  constructor(message) {\n    super(message);\n  }\n  get name() {\n    return 'MongoOIDCError';\n  }\n}\nexports.MongoOIDCError = MongoOIDCError;\n/**\n * A error generated when the user attempts to authenticate\n * via Azure, but fails.\n *\n * @public\n * @category Error\n */\nclass MongoAzureError extends MongoOIDCError {\n  /**\n   * **Do not use this constructor!**\n   *\n   * Meant for internal use only.\n   *\n   * @remarks\n   * This class is only meant to be constructed within the driver. This constructor is\n   * not subject to semantic versioning compatibility guarantees and may change at any time.\n   *\n   * @public\n   **/\n  constructor(message) {\n    super(message);\n  }\n  get name() {\n    return 'MongoAzureError';\n  }\n}\nexports.MongoAzureError = MongoAzureError;\n/**\n * A error generated when the user attempts to authenticate\n * via GCP, but fails.\n *\n * @public\n * @category Error\n */\nclass MongoGCPError extends MongoOIDCError {\n  /**\n   * **Do not use this constructor!**\n   *\n   * Meant for internal use only.\n   *\n   * @remarks\n   * This class is only meant to be constructed within the driver. This constructor is\n   * not subject to semantic versioning compatibility guarantees and may change at any time.\n   *\n   * @public\n   **/\n  constructor(message) {\n    super(message);\n  }\n  get name() {\n    return 'MongoGCPError';\n  }\n}\nexports.MongoGCPError = MongoGCPError;\n/**\n * An error generated when a ChangeStream operation fails to execute.\n *\n * @public\n * @category Error\n */\nclass MongoChangeStreamError extends MongoRuntimeError {\n  /**\n   * **Do not use this constructor!**\n   *\n   * Meant for internal use only.\n   *\n   * @remarks\n   * This class is only meant to be constructed within the driver. This constructor is\n   * not subject to semantic versioning compatibility guarantees and may change at any time.\n   *\n   * @public\n   **/\n  constructor(message) {\n    super(message);\n  }\n  get name() {\n    return 'MongoChangeStreamError';\n  }\n}\nexports.MongoChangeStreamError = MongoChangeStreamError;\n/**\n * An error thrown when the user calls a function or method not supported on a tailable cursor\n *\n * @public\n * @category Error\n */\nclass MongoTailableCursorError extends MongoAPIError {\n  /**\n   * **Do not use this constructor!**\n   *\n   * Meant for internal use only.\n   *\n   * @remarks\n   * This class is only meant to be constructed within the driver. This constructor is\n   * not subject to semantic versioning compatibility guarantees and may change at any time.\n   *\n   * @public\n   **/\n  constructor(message = 'Tailable cursor does not support this operation') {\n    super(message);\n  }\n  get name() {\n    return 'MongoTailableCursorError';\n  }\n}\nexports.MongoTailableCursorError = MongoTailableCursorError;\n/** An error generated when a GridFSStream operation fails to execute.\n *\n * @public\n * @category Error\n */\nclass MongoGridFSStreamError extends MongoRuntimeError {\n  /**\n   * **Do not use this constructor!**\n   *\n   * Meant for internal use only.\n   *\n   * @remarks\n   * This class is only meant to be constructed within the driver. This constructor is\n   * not subject to semantic versioning compatibility guarantees and may change at any time.\n   *\n   * @public\n   **/\n  constructor(message) {\n    super(message);\n  }\n  get name() {\n    return 'MongoGridFSStreamError';\n  }\n}\nexports.MongoGridFSStreamError = MongoGridFSStreamError;\n/**\n * An error generated when a malformed or invalid chunk is\n * encountered when reading from a GridFSStream.\n *\n * @public\n * @category Error\n */\nclass MongoGridFSChunkError extends MongoRuntimeError {\n  /**\n   * **Do not use this constructor!**\n   *\n   * Meant for internal use only.\n   *\n   * @remarks\n   * This class is only meant to be constructed within the driver. This constructor is\n   * not subject to semantic versioning compatibility guarantees and may change at any time.\n   *\n   * @public\n   **/\n  constructor(message) {\n    super(message);\n  }\n  get name() {\n    return 'MongoGridFSChunkError';\n  }\n}\nexports.MongoGridFSChunkError = MongoGridFSChunkError;\n/**\n * An error generated when a **parsable** unexpected response comes from the server.\n * This is generally an error where the driver in a state expecting a certain behavior to occur in\n * the next message from MongoDB but it receives something else.\n * This error **does not** represent an issue with wire message formatting.\n *\n * #### Example\n * When an operation fails, it is the driver's job to retry it. It must perform serverSelection\n * again to make sure that it attempts the operation against a server in a good state. If server\n * selection returns a server that does not support retryable operations, this error is used.\n * This scenario is unlikely as retryable support would also have been determined on the first attempt\n * but it is possible the state change could report a selectable server that does not support retries.\n *\n * @public\n * @category Error\n */\nclass MongoUnexpectedServerResponseError extends MongoRuntimeError {\n  /**\n   * **Do not use this constructor!**\n   *\n   * Meant for internal use only.\n   *\n   * @remarks\n   * This class is only meant to be constructed within the driver. This constructor is\n   * not subject to semantic versioning compatibility guarantees and may change at any time.\n   *\n   * @public\n   **/\n  constructor(message, options) {\n    super(message, options);\n  }\n  get name() {\n    return 'MongoUnexpectedServerResponseError';\n  }\n}\nexports.MongoUnexpectedServerResponseError = MongoUnexpectedServerResponseError;\n/**\n * An error thrown when the user attempts to add options to a cursor that has already been\n * initialized\n *\n * @public\n * @category Error\n */\nclass MongoCursorInUseError extends MongoAPIError {\n  /**\n   * **Do not use this constructor!**\n   *\n   * Meant for internal use only.\n   *\n   * @remarks\n   * This class is only meant to be constructed within the driver. This constructor is\n   * not subject to semantic versioning compatibility guarantees and may change at any time.\n   *\n   * @public\n   **/\n  constructor(message = 'Cursor is already initialized') {\n    super(message);\n  }\n  get name() {\n    return 'MongoCursorInUseError';\n  }\n}\nexports.MongoCursorInUseError = MongoCursorInUseError;\n/**\n * An error generated when an attempt is made to operate\n * on a closed/closing server.\n *\n * @public\n * @category Error\n */\nclass MongoServerClosedError extends MongoAPIError {\n  /**\n   * **Do not use this constructor!**\n   *\n   * Meant for internal use only.\n   *\n   * @remarks\n   * This class is only meant to be constructed within the driver. This constructor is\n   * not subject to semantic versioning compatibility guarantees and may change at any time.\n   *\n   * @public\n   **/\n  constructor(message = 'Server is closed') {\n    super(message);\n  }\n  get name() {\n    return 'MongoServerClosedError';\n  }\n}\nexports.MongoServerClosedError = MongoServerClosedError;\n/**\n * An error thrown when an attempt is made to read from a cursor that has been exhausted\n *\n * @public\n * @category Error\n */\nclass MongoCursorExhaustedError extends MongoAPIError {\n  /**\n   * **Do not use this constructor!**\n   *\n   * Meant for internal use only.\n   *\n   * @remarks\n   * This class is only meant to be constructed within the driver. This constructor is\n   * not subject to semantic versioning compatibility guarantees and may change at any time.\n   *\n   * @public\n   **/\n  constructor(message) {\n    super(message || 'Cursor is exhausted');\n  }\n  get name() {\n    return 'MongoCursorExhaustedError';\n  }\n}\nexports.MongoCursorExhaustedError = MongoCursorExhaustedError;\n/**\n * An error generated when an attempt is made to operate on a\n * dropped, or otherwise unavailable, database.\n *\n * @public\n * @category Error\n */\nclass MongoTopologyClosedError extends MongoAPIError {\n  /**\n   * **Do not use this constructor!**\n   *\n   * Meant for internal use only.\n   *\n   * @remarks\n   * This class is only meant to be constructed within the driver. This constructor is\n   * not subject to semantic versioning compatibility guarantees and may change at any time.\n   *\n   * @public\n   **/\n  constructor(message = 'Topology is closed') {\n    super(message);\n  }\n  get name() {\n    return 'MongoTopologyClosedError';\n  }\n}\nexports.MongoTopologyClosedError = MongoTopologyClosedError;\n/** @internal */\nconst kBeforeHandshake = Symbol('beforeHandshake');\nfunction isNetworkErrorBeforeHandshake(err) {\n  return err[kBeforeHandshake] === true;\n}\n/**\n * An error indicating an issue with the network, including TCP errors and timeouts.\n * @public\n * @category Error\n */\nclass MongoNetworkError extends MongoError {\n  /**\n   * **Do not use this constructor!**\n   *\n   * Meant for internal use only.\n   *\n   * @remarks\n   * This class is only meant to be constructed within the driver. This constructor is\n   * not subject to semantic versioning compatibility guarantees and may change at any time.\n   *\n   * @public\n   **/\n  constructor(message, options) {\n    super(message, {\n      cause: options?.cause\n    });\n    if (options && typeof options.beforeHandshake === 'boolean') {\n      this[kBeforeHandshake] = options.beforeHandshake;\n    }\n  }\n  get name() {\n    return 'MongoNetworkError';\n  }\n}\nexports.MongoNetworkError = MongoNetworkError;\n/**\n * An error indicating a network timeout occurred\n * @public\n * @category Error\n *\n * @privateRemarks\n * mongodb-client-encryption has a dependency on this error with an instanceof check\n */\nclass MongoNetworkTimeoutError extends MongoNetworkError {\n  /**\n   * **Do not use this constructor!**\n   *\n   * Meant for internal use only.\n   *\n   * @remarks\n   * This class is only meant to be constructed within the driver. This constructor is\n   * not subject to semantic versioning compatibility guarantees and may change at any time.\n   *\n   * @public\n   **/\n  constructor(message, options) {\n    super(message, options);\n  }\n  get name() {\n    return 'MongoNetworkTimeoutError';\n  }\n}\nexports.MongoNetworkTimeoutError = MongoNetworkTimeoutError;\n/**\n * An error used when attempting to parse a value (like a connection string)\n * @public\n * @category Error\n */\nclass MongoParseError extends MongoDriverError {\n  /**\n   * **Do not use this constructor!**\n   *\n   * Meant for internal use only.\n   *\n   * @remarks\n   * This class is only meant to be constructed within the driver. This constructor is\n   * not subject to semantic versioning compatibility guarantees and may change at any time.\n   *\n   * @public\n   **/\n  constructor(message) {\n    super(message);\n  }\n  get name() {\n    return 'MongoParseError';\n  }\n}\nexports.MongoParseError = MongoParseError;\n/**\n * An error generated when the user supplies malformed or unexpected arguments\n * or when a required argument or field is not provided.\n *\n *\n * @public\n * @category Error\n */\nclass MongoInvalidArgumentError extends MongoAPIError {\n  /**\n   * **Do not use this constructor!**\n   *\n   * Meant for internal use only.\n   *\n   * @remarks\n   * This class is only meant to be constructed within the driver. This constructor is\n   * not subject to semantic versioning compatibility guarantees and may change at any time.\n   *\n   * @public\n   **/\n  constructor(message) {\n    super(message);\n  }\n  get name() {\n    return 'MongoInvalidArgumentError';\n  }\n}\nexports.MongoInvalidArgumentError = MongoInvalidArgumentError;\n/**\n * An error generated when a feature that is not enabled or allowed for the current server\n * configuration is used\n *\n *\n * @public\n * @category Error\n */\nclass MongoCompatibilityError extends MongoAPIError {\n  /**\n   * **Do not use this constructor!**\n   *\n   * Meant for internal use only.\n   *\n   * @remarks\n   * This class is only meant to be constructed within the driver. This constructor is\n   * not subject to semantic versioning compatibility guarantees and may change at any time.\n   *\n   * @public\n   **/\n  constructor(message) {\n    super(message);\n  }\n  get name() {\n    return 'MongoCompatibilityError';\n  }\n}\nexports.MongoCompatibilityError = MongoCompatibilityError;\n/**\n * An error generated when the user fails to provide authentication credentials before attempting\n * to connect to a mongo server instance.\n *\n *\n * @public\n * @category Error\n */\nclass MongoMissingCredentialsError extends MongoAPIError {\n  /**\n   * **Do not use this constructor!**\n   *\n   * Meant for internal use only.\n   *\n   * @remarks\n   * This class is only meant to be constructed within the driver. This constructor is\n   * not subject to semantic versioning compatibility guarantees and may change at any time.\n   *\n   * @public\n   **/\n  constructor(message) {\n    super(message);\n  }\n  get name() {\n    return 'MongoMissingCredentialsError';\n  }\n}\nexports.MongoMissingCredentialsError = MongoMissingCredentialsError;\n/**\n * An error generated when a required module or dependency is not present in the local environment\n *\n * @public\n * @category Error\n */\nclass MongoMissingDependencyError extends MongoAPIError {\n  /**\n   * **Do not use this constructor!**\n   *\n   * Meant for internal use only.\n   *\n   * @remarks\n   * This class is only meant to be constructed within the driver. This constructor is\n   * not subject to semantic versioning compatibility guarantees and may change at any time.\n   *\n   * @public\n   **/\n  constructor(message, options) {\n    super(message, options);\n    this.dependencyName = options.dependencyName;\n  }\n  get name() {\n    return 'MongoMissingDependencyError';\n  }\n}\nexports.MongoMissingDependencyError = MongoMissingDependencyError;\n/**\n * An error signifying a general system issue\n * @public\n * @category Error\n */\nclass MongoSystemError extends MongoError {\n  /**\n   * **Do not use this constructor!**\n   *\n   * Meant for internal use only.\n   *\n   * @remarks\n   * This class is only meant to be constructed within the driver. This constructor is\n   * not subject to semantic versioning compatibility guarantees and may change at any time.\n   *\n   * @public\n   **/\n  constructor(message, reason) {\n    if (reason && reason.error) {\n      super(MongoError.buildErrorMessage(reason.error.message || reason.error), {\n        cause: reason.error\n      });\n    } else {\n      super(message);\n    }\n    if (reason) {\n      this.reason = reason;\n    }\n    this.code = reason.error?.code;\n  }\n  get name() {\n    return 'MongoSystemError';\n  }\n}\nexports.MongoSystemError = MongoSystemError;\n/**\n * An error signifying a client-side server selection error\n * @public\n * @category Error\n */\nclass MongoServerSelectionError extends MongoSystemError {\n  /**\n   * **Do not use this constructor!**\n   *\n   * Meant for internal use only.\n   *\n   * @remarks\n   * This class is only meant to be constructed within the driver. This constructor is\n   * not subject to semantic versioning compatibility guarantees and may change at any time.\n   *\n   * @public\n   **/\n  constructor(message, reason) {\n    super(message, reason);\n  }\n  get name() {\n    return 'MongoServerSelectionError';\n  }\n}\nexports.MongoServerSelectionError = MongoServerSelectionError;\n/**\n * An error thrown when the server reports a writeConcernError\n * @public\n * @category Error\n */\nclass MongoWriteConcernError extends MongoServerError {\n  /**\n   * **Do not use this constructor!**\n   *\n   * Meant for internal use only.\n   *\n   * @remarks\n   * This class is only meant to be constructed within the driver. This constructor is\n   * not subject to semantic versioning compatibility guarantees and may change at any time.\n   *\n   * @public\n   **/\n  constructor(result) {\n    super({\n      ...result.writeConcernError,\n      ...result\n    });\n    this.errInfo = result.writeConcernError.errInfo;\n    this.result = result;\n  }\n  get name() {\n    return 'MongoWriteConcernError';\n  }\n}\nexports.MongoWriteConcernError = MongoWriteConcernError;\n// https://github.com/mongodb/specifications/blob/master/source/retryable-reads/retryable-reads.rst#retryable-error\nconst RETRYABLE_READ_ERROR_CODES = new Set([exports.MONGODB_ERROR_CODES.HostUnreachable, exports.MONGODB_ERROR_CODES.HostNotFound, exports.MONGODB_ERROR_CODES.NetworkTimeout, exports.MONGODB_ERROR_CODES.ShutdownInProgress, exports.MONGODB_ERROR_CODES.PrimarySteppedDown, exports.MONGODB_ERROR_CODES.SocketException, exports.MONGODB_ERROR_CODES.NotWritablePrimary, exports.MONGODB_ERROR_CODES.InterruptedAtShutdown, exports.MONGODB_ERROR_CODES.InterruptedDueToReplStateChange, exports.MONGODB_ERROR_CODES.NotPrimaryNoSecondaryOk, exports.MONGODB_ERROR_CODES.NotPrimaryOrSecondary, exports.MONGODB_ERROR_CODES.ExceededTimeLimit, exports.MONGODB_ERROR_CODES.ReadConcernMajorityNotAvailableYet]);\n// see: https://github.com/mongodb/specifications/blob/master/source/retryable-writes/retryable-writes.rst#terms\nconst RETRYABLE_WRITE_ERROR_CODES = RETRYABLE_READ_ERROR_CODES;\nfunction needsRetryableWriteLabel(error, maxWireVersion, serverType) {\n  // pre-4.4 server, then the driver adds an error label for every valid case\n  // execute operation will only inspect the label, code/message logic is handled here\n  if (error instanceof MongoNetworkError) {\n    return true;\n  }\n  if (error instanceof MongoError) {\n    if ((maxWireVersion >= 9 || isRetryableWriteError(error)) && !error.hasErrorLabel(exports.MongoErrorLabel.HandshakeError)) {\n      // If we already have the error label no need to add it again. 4.4+ servers add the label.\n      // In the case where we have a handshake error, need to fall down to the logic checking\n      // the codes.\n      return false;\n    }\n  }\n  if (error instanceof MongoWriteConcernError) {\n    if (serverType === 'Mongos' && maxWireVersion < 9) {\n      // use original top-level code from server response\n      return RETRYABLE_WRITE_ERROR_CODES.has(error.result.code ?? 0);\n    }\n    const code = error.result.writeConcernError.code ?? Number(error.code);\n    return RETRYABLE_WRITE_ERROR_CODES.has(Number.isNaN(code) ? 0 : code);\n  }\n  if (error instanceof MongoError) {\n    return RETRYABLE_WRITE_ERROR_CODES.has(Number(error.code));\n  }\n  const isNotWritablePrimaryError = exports.LEGACY_NOT_WRITABLE_PRIMARY_ERROR_MESSAGE.test(error.message);\n  if (isNotWritablePrimaryError) {\n    return true;\n  }\n  const isNodeIsRecoveringError = exports.NODE_IS_RECOVERING_ERROR_MESSAGE.test(error.message);\n  if (isNodeIsRecoveringError) {\n    return true;\n  }\n  return false;\n}\nfunction isRetryableWriteError(error) {\n  return error.hasErrorLabel(exports.MongoErrorLabel.RetryableWriteError) || error.hasErrorLabel(exports.MongoErrorLabel.PoolRequstedRetry);\n}\n/** Determines whether an error is something the driver should attempt to retry */\nfunction isRetryableReadError(error) {\n  const hasRetryableErrorCode = typeof error.code === 'number' ? RETRYABLE_READ_ERROR_CODES.has(error.code) : false;\n  if (hasRetryableErrorCode) {\n    return true;\n  }\n  if (error instanceof MongoNetworkError) {\n    return true;\n  }\n  const isNotWritablePrimaryError = exports.LEGACY_NOT_WRITABLE_PRIMARY_ERROR_MESSAGE.test(error.message);\n  if (isNotWritablePrimaryError) {\n    return true;\n  }\n  const isNodeIsRecoveringError = exports.NODE_IS_RECOVERING_ERROR_MESSAGE.test(error.message);\n  if (isNodeIsRecoveringError) {\n    return true;\n  }\n  return false;\n}\nconst SDAM_RECOVERING_CODES = new Set([exports.MONGODB_ERROR_CODES.ShutdownInProgress, exports.MONGODB_ERROR_CODES.PrimarySteppedDown, exports.MONGODB_ERROR_CODES.InterruptedAtShutdown, exports.MONGODB_ERROR_CODES.InterruptedDueToReplStateChange, exports.MONGODB_ERROR_CODES.NotPrimaryOrSecondary]);\nconst SDAM_NOT_PRIMARY_CODES = new Set([exports.MONGODB_ERROR_CODES.NotWritablePrimary, exports.MONGODB_ERROR_CODES.NotPrimaryNoSecondaryOk, exports.MONGODB_ERROR_CODES.LegacyNotPrimary]);\nconst SDAM_NODE_SHUTTING_DOWN_ERROR_CODES = new Set([exports.MONGODB_ERROR_CODES.InterruptedAtShutdown, exports.MONGODB_ERROR_CODES.ShutdownInProgress]);\nfunction isRecoveringError(err) {\n  if (typeof err.code === 'number') {\n    // If any error code exists, we ignore the error.message\n    return SDAM_RECOVERING_CODES.has(err.code);\n  }\n  return exports.LEGACY_NOT_PRIMARY_OR_SECONDARY_ERROR_MESSAGE.test(err.message) || exports.NODE_IS_RECOVERING_ERROR_MESSAGE.test(err.message);\n}\nfunction isNotWritablePrimaryError(err) {\n  if (typeof err.code === 'number') {\n    // If any error code exists, we ignore the error.message\n    return SDAM_NOT_PRIMARY_CODES.has(err.code);\n  }\n  if (isRecoveringError(err)) {\n    return false;\n  }\n  return exports.LEGACY_NOT_WRITABLE_PRIMARY_ERROR_MESSAGE.test(err.message);\n}\nfunction isNodeShuttingDownError(err) {\n  return !!(typeof err.code === 'number' && SDAM_NODE_SHUTTING_DOWN_ERROR_CODES.has(err.code));\n}\n/**\n * Determines whether SDAM can recover from a given error. If it cannot\n * then the pool will be cleared, and server state will completely reset\n * locally.\n *\n * @see https://github.com/mongodb/specifications/blob/master/source/server-discovery-and-monitoring/server-discovery-and-monitoring.rst#not-master-and-node-is-recovering\n */\nfunction isSDAMUnrecoverableError(error) {\n  // NOTE: null check is here for a strictly pre-CMAP world, a timeout or\n  //       close event are considered unrecoverable\n  if (error instanceof MongoParseError || error == null) {\n    return true;\n  }\n  return isRecoveringError(error) || isNotWritablePrimaryError(error);\n}\nfunction isNetworkTimeoutError(err) {\n  return !!(err instanceof MongoNetworkError && err.message.match(/timed out/));\n}\nfunction isResumableError(error, wireVersion) {\n  if (error == null || !(error instanceof MongoError)) {\n    return false;\n  }\n  if (error instanceof MongoNetworkError) {\n    return true;\n  }\n  if (wireVersion != null && wireVersion >= 9) {\n    // DRIVERS-1308: For 4.4 drivers running against 4.4 servers, drivers will add a special case to treat the CursorNotFound error code as resumable\n    if (error.code === exports.MONGODB_ERROR_CODES.CursorNotFound) {\n      return true;\n    }\n    return error.hasErrorLabel(exports.MongoErrorLabel.ResumableChangeStreamError);\n  }\n  if (typeof error.code === 'number') {\n    return exports.GET_MORE_RESUMABLE_CODES.has(error.code);\n  }\n  return false;\n}","map":{"version":3,"names":["exports","isNetworkErrorBeforeHandshake","needsRetryableWriteLabel","isRetryableWriteError","isRetryableReadError","isNodeShuttingDownError","isSDAMUnrecoverableError","isNetworkTimeoutError","isResumableError","kErrorLabels","Symbol","LEGACY_NOT_WRITABLE_PRIMARY_ERROR_MESSAGE","RegExp","LEGACY_NOT_PRIMARY_OR_SECONDARY_ERROR_MESSAGE","NODE_IS_RECOVERING_ERROR_MESSAGE","MONGODB_ERROR_CODES","Object","freeze","HostUnreachable","HostNotFound","AuthenticationFailed","NetworkTimeout","ShutdownInProgress","PrimarySteppedDown","ExceededTimeLimit","SocketException","NotWritablePrimary","InterruptedAtShutdown","InterruptedDueToReplStateChange","NotPrimaryNoSecondaryOk","NotPrimaryOrSecondary","StaleShardVersion","StaleEpoch","StaleConfig","RetryChangeStream","FailedToSatisfyReadPreference","CursorNotFound","LegacyNotPrimary","WriteConcernFailed","NamespaceNotFound","IllegalOperation","MaxTimeMSExpired","UnknownReplWriteConcern","UnsatisfiableWriteConcern","Reauthenticate","ReadConcernMajorityNotAvailableYet","GET_MORE_RESUMABLE_CODES","Set","MongoErrorLabel","RetryableWriteError","TransientTransactionError","UnknownTransactionCommitResult","ResumableChangeStreamError","HandshakeError","ResetPool","PoolRequstedRetry","InterruptInUseConnections","NoWritesPerformed","isAggregateError","e","Array","isArray","errors","MongoError","Error","constructor","message","options","buildErrorMessage","length","map","join","name","errmsg","hasErrorLabel","label","has","addErrorLabel","add","errorLabels","from","MongoServerError","$err","errorResponse","MongoDriverError","MongoAPIError","MongoRuntimeError","MongoBatchReExecutionError","MongoDecompressionError","MongoNotConnectedError","MongoTransactionError","MongoExpiredSessionError","MongoKerberosError","MongoAWSError","MongoOIDCError","MongoAzureError","MongoGCPError","MongoChangeStreamError","MongoTailableCursorError","MongoGridFSStreamError","MongoGridFSChunkError","MongoUnexpectedServerResponseError","MongoCursorInUseError","MongoServerClosedError","MongoCursorExhaustedError","MongoTopologyClosedError","kBeforeHandshake","err","MongoNetworkError","cause","beforeHandshake","MongoNetworkTimeoutError","MongoParseError","MongoInvalidArgumentError","MongoCompatibilityError","MongoMissingCredentialsError","MongoMissingDependencyError","dependencyName","MongoSystemError","reason","error","code","MongoServerSelectionError","MongoWriteConcernError","result","writeConcernError","errInfo","RETRYABLE_READ_ERROR_CODES","RETRYABLE_WRITE_ERROR_CODES","maxWireVersion","serverType","Number","isNaN","isNotWritablePrimaryError","test","isNodeIsRecoveringError","hasRetryableErrorCode","SDAM_RECOVERING_CODES","SDAM_NOT_PRIMARY_CODES","SDAM_NODE_SHUTTING_DOWN_ERROR_CODES","isRecoveringError","match","wireVersion"],"sources":["/home/tobiya/node_modules/mongodb/src/error.ts"],"sourcesContent":["import type { Document } from './bson';\nimport type { ServerType } from './sdam/common';\nimport type { TopologyVersion } from './sdam/server_description';\nimport type { TopologyDescription } from './sdam/topology_description';\n\n/** @public */\nexport type AnyError = MongoError | Error;\n\n/** @internal */\nconst kErrorLabels = Symbol('errorLabels');\n\n/**\n * @internal\n * The legacy error message from the server that indicates the node is not a writable primary\n * https://github.com/mongodb/specifications/blob/b07c26dc40d04ac20349f989db531c9845fdd755/source/server-discovery-and-monitoring/server-discovery-and-monitoring.rst#not-writable-primary-and-node-is-recovering\n */\nexport const LEGACY_NOT_WRITABLE_PRIMARY_ERROR_MESSAGE = new RegExp('not master', 'i');\n\n/**\n * @internal\n * The legacy error message from the server that indicates the node is not a primary or secondary\n * https://github.com/mongodb/specifications/blob/b07c26dc40d04ac20349f989db531c9845fdd755/source/server-discovery-and-monitoring/server-discovery-and-monitoring.rst#not-writable-primary-and-node-is-recovering\n */\nexport const LEGACY_NOT_PRIMARY_OR_SECONDARY_ERROR_MESSAGE = new RegExp(\n  'not master or secondary',\n  'i'\n);\n\n/**\n * @internal\n * The error message from the server that indicates the node is recovering\n * https://github.com/mongodb/specifications/blob/b07c26dc40d04ac20349f989db531c9845fdd755/source/server-discovery-and-monitoring/server-discovery-and-monitoring.rst#not-writable-primary-and-node-is-recovering\n */\nexport const NODE_IS_RECOVERING_ERROR_MESSAGE = new RegExp('node is recovering', 'i');\n\n/** @internal MongoDB Error Codes */\nexport const MONGODB_ERROR_CODES = Object.freeze({\n  HostUnreachable: 6,\n  HostNotFound: 7,\n  AuthenticationFailed: 18,\n  NetworkTimeout: 89,\n  ShutdownInProgress: 91,\n  PrimarySteppedDown: 189,\n  ExceededTimeLimit: 262,\n  SocketException: 9001,\n  NotWritablePrimary: 10107,\n  InterruptedAtShutdown: 11600,\n  InterruptedDueToReplStateChange: 11602,\n  NotPrimaryNoSecondaryOk: 13435,\n  NotPrimaryOrSecondary: 13436,\n  StaleShardVersion: 63,\n  StaleEpoch: 150,\n  StaleConfig: 13388,\n  RetryChangeStream: 234,\n  FailedToSatisfyReadPreference: 133,\n  CursorNotFound: 43,\n  LegacyNotPrimary: 10058,\n  WriteConcernFailed: 64,\n  NamespaceNotFound: 26,\n  IllegalOperation: 20,\n  MaxTimeMSExpired: 50,\n  UnknownReplWriteConcern: 79,\n  UnsatisfiableWriteConcern: 100,\n  Reauthenticate: 391,\n  ReadConcernMajorityNotAvailableYet: 134\n} as const);\n\n// From spec@https://github.com/mongodb/specifications/blob/f93d78191f3db2898a59013a7ed5650352ef6da8/source/change-streams/change-streams.rst#resumable-error\nexport const GET_MORE_RESUMABLE_CODES = new Set<number>([\n  MONGODB_ERROR_CODES.HostUnreachable,\n  MONGODB_ERROR_CODES.HostNotFound,\n  MONGODB_ERROR_CODES.NetworkTimeout,\n  MONGODB_ERROR_CODES.ShutdownInProgress,\n  MONGODB_ERROR_CODES.PrimarySteppedDown,\n  MONGODB_ERROR_CODES.ExceededTimeLimit,\n  MONGODB_ERROR_CODES.SocketException,\n  MONGODB_ERROR_CODES.NotWritablePrimary,\n  MONGODB_ERROR_CODES.InterruptedAtShutdown,\n  MONGODB_ERROR_CODES.InterruptedDueToReplStateChange,\n  MONGODB_ERROR_CODES.NotPrimaryNoSecondaryOk,\n  MONGODB_ERROR_CODES.NotPrimaryOrSecondary,\n  MONGODB_ERROR_CODES.StaleShardVersion,\n  MONGODB_ERROR_CODES.StaleEpoch,\n  MONGODB_ERROR_CODES.StaleConfig,\n  MONGODB_ERROR_CODES.RetryChangeStream,\n  MONGODB_ERROR_CODES.FailedToSatisfyReadPreference,\n  MONGODB_ERROR_CODES.CursorNotFound\n]);\n\n/** @public */\nexport const MongoErrorLabel = Object.freeze({\n  RetryableWriteError: 'RetryableWriteError',\n  TransientTransactionError: 'TransientTransactionError',\n  UnknownTransactionCommitResult: 'UnknownTransactionCommitResult',\n  ResumableChangeStreamError: 'ResumableChangeStreamError',\n  HandshakeError: 'HandshakeError',\n  ResetPool: 'ResetPool',\n  PoolRequstedRetry: 'PoolRequstedRetry',\n  InterruptInUseConnections: 'InterruptInUseConnections',\n  NoWritesPerformed: 'NoWritesPerformed'\n} as const);\n\n/** @public */\nexport type MongoErrorLabel = (typeof MongoErrorLabel)[keyof typeof MongoErrorLabel];\n\n/** @public */\nexport interface ErrorDescription extends Document {\n  message?: string;\n  errmsg?: string;\n  $err?: string;\n  errorLabels?: string[];\n  errInfo?: Document;\n}\n\nfunction isAggregateError(e: unknown): e is Error & { errors: Error[] } {\n  return e != null && typeof e === 'object' && 'errors' in e && Array.isArray(e.errors);\n}\n\n/**\n * @public\n * @category Error\n *\n * @privateRemarks\n * mongodb-client-encryption has a dependency on this error, it uses the constructor with a string argument\n */\nexport class MongoError extends Error {\n  /** @internal */\n  [kErrorLabels]: Set<string>;\n  /**\n   * This is a number in MongoServerError and a string in MongoDriverError\n   * @privateRemarks\n   * Define the type override on the subclasses when we can use the override keyword\n   */\n  code?: number | string;\n  topologyVersion?: TopologyVersion;\n  connectionGeneration?: number;\n  override cause?: Error;\n\n  /**\n   * **Do not use this constructor!**\n   *\n   * Meant for internal use only.\n   *\n   * @remarks\n   * This class is only meant to be constructed within the driver. This constructor is\n   * not subject to semantic versioning compatibility guarantees and may change at any time.\n   *\n   * @public\n   **/\n  constructor(message: string, options?: { cause?: Error }) {\n    super(message, options);\n    this[kErrorLabels] = new Set();\n  }\n\n  /** @internal */\n  static buildErrorMessage(e: unknown): string {\n    if (typeof e === 'string') {\n      return e;\n    }\n    if (isAggregateError(e) && e.message.length === 0) {\n      return e.errors.length === 0\n        ? 'AggregateError has an empty errors array. Please check the `cause` property for more information.'\n        : e.errors.map(({ message }) => message).join(', ');\n    }\n\n    return e != null && typeof e === 'object' && 'message' in e && typeof e.message === 'string'\n      ? e.message\n      : 'empty error message';\n  }\n\n  override get name(): string {\n    return 'MongoError';\n  }\n\n  /** Legacy name for server error responses */\n  get errmsg(): string {\n    return this.message;\n  }\n\n  /**\n   * Checks the error to see if it has an error label\n   *\n   * @param label - The error label to check for\n   * @returns returns true if the error has the provided error label\n   */\n  hasErrorLabel(label: string): boolean {\n    return this[kErrorLabels].has(label);\n  }\n\n  addErrorLabel(label: string): void {\n    this[kErrorLabels].add(label);\n  }\n\n  get errorLabels(): string[] {\n    return Array.from(this[kErrorLabels]);\n  }\n}\n\n/**\n * An error coming from the mongo server\n *\n * @public\n * @category Error\n */\nexport class MongoServerError extends MongoError {\n  /** Raw error result document returned by server. */\n  errorResponse: ErrorDescription;\n  codeName?: string;\n  writeConcernError?: Document;\n  errInfo?: Document;\n  ok?: number;\n  [key: string]: any;\n\n  /**\n   * **Do not use this constructor!**\n   *\n   * Meant for internal use only.\n   *\n   * @remarks\n   * This class is only meant to be constructed within the driver. This constructor is\n   * not subject to semantic versioning compatibility guarantees and may change at any time.\n   *\n   * @public\n   **/\n  constructor(message: ErrorDescription) {\n    super(message.message || message.errmsg || message.$err || 'n/a');\n    if (message.errorLabels) {\n      this[kErrorLabels] = new Set(message.errorLabels);\n    }\n\n    this.errorResponse = message;\n\n    for (const name in message) {\n      if (\n        name !== 'errorLabels' &&\n        name !== 'errmsg' &&\n        name !== 'message' &&\n        name !== 'errorResponse'\n      ) {\n        this[name] = message[name];\n      }\n    }\n  }\n\n  override get name(): string {\n    return 'MongoServerError';\n  }\n}\n\n/**\n * An error generated by the driver\n *\n * @public\n * @category Error\n */\nexport class MongoDriverError extends MongoError {\n  /**\n   * **Do not use this constructor!**\n   *\n   * Meant for internal use only.\n   *\n   * @remarks\n   * This class is only meant to be constructed within the driver. This constructor is\n   * not subject to semantic versioning compatibility guarantees and may change at any time.\n   *\n   * @public\n   **/\n  constructor(message: string, options?: { cause?: Error }) {\n    super(message, options);\n  }\n\n  override get name(): string {\n    return 'MongoDriverError';\n  }\n}\n\n/**\n * An error generated when the driver API is used incorrectly\n *\n * @privateRemarks\n * Should **never** be directly instantiated\n *\n * @public\n * @category Error\n */\n\nexport class MongoAPIError extends MongoDriverError {\n  /**\n   * **Do not use this constructor!**\n   *\n   * Meant for internal use only.\n   *\n   * @remarks\n   * This class is only meant to be constructed within the driver. This constructor is\n   * not subject to semantic versioning compatibility guarantees and may change at any time.\n   *\n   * @public\n   **/\n  constructor(message: string, options?: { cause?: Error }) {\n    super(message, options);\n  }\n\n  override get name(): string {\n    return 'MongoAPIError';\n  }\n}\n\n/**\n * An error generated when the driver encounters unexpected input\n * or reaches an unexpected/invalid internal state\n *\n * @privateRemarks\n * Should **never** be directly instantiated.\n *\n * @public\n * @category Error\n */\nexport class MongoRuntimeError extends MongoDriverError {\n  /**\n   * **Do not use this constructor!**\n   *\n   * Meant for internal use only.\n   *\n   * @remarks\n   * This class is only meant to be constructed within the driver. This constructor is\n   * not subject to semantic versioning compatibility guarantees and may change at any time.\n   *\n   * @public\n   **/\n  constructor(message: string, options?: { cause?: Error }) {\n    super(message, options);\n  }\n\n  override get name(): string {\n    return 'MongoRuntimeError';\n  }\n}\n\n/**\n * An error generated when a batch command is re-executed after one of the commands in the batch\n * has failed\n *\n * @public\n * @category Error\n */\nexport class MongoBatchReExecutionError extends MongoAPIError {\n  /**\n   * **Do not use this constructor!**\n   *\n   * Meant for internal use only.\n   *\n   * @remarks\n   * This class is only meant to be constructed within the driver. This constructor is\n   * not subject to semantic versioning compatibility guarantees and may change at any time.\n   *\n   * @public\n   **/\n  constructor(message = 'This batch has already been executed, create new batch to execute') {\n    super(message);\n  }\n\n  override get name(): string {\n    return 'MongoBatchReExecutionError';\n  }\n}\n\n/**\n * An error generated when the driver fails to decompress\n * data received from the server.\n *\n * @public\n * @category Error\n */\nexport class MongoDecompressionError extends MongoRuntimeError {\n  /**\n   * **Do not use this constructor!**\n   *\n   * Meant for internal use only.\n   *\n   * @remarks\n   * This class is only meant to be constructed within the driver. This constructor is\n   * not subject to semantic versioning compatibility guarantees and may change at any time.\n   *\n   * @public\n   **/\n  constructor(message: string) {\n    super(message);\n  }\n\n  override get name(): string {\n    return 'MongoDecompressionError';\n  }\n}\n\n/**\n * An error thrown when the user attempts to operate on a database or collection through a MongoClient\n * that has not yet successfully called the \"connect\" method\n *\n * @public\n * @category Error\n */\nexport class MongoNotConnectedError extends MongoAPIError {\n  /**\n   * **Do not use this constructor!**\n   *\n   * Meant for internal use only.\n   *\n   * @remarks\n   * This class is only meant to be constructed within the driver. This constructor is\n   * not subject to semantic versioning compatibility guarantees and may change at any time.\n   *\n   * @public\n   **/\n  constructor(message: string) {\n    super(message);\n  }\n\n  override get name(): string {\n    return 'MongoNotConnectedError';\n  }\n}\n\n/**\n * An error generated when the user makes a mistake in the usage of transactions.\n * (e.g. attempting to commit a transaction with a readPreference other than primary)\n *\n * @public\n * @category Error\n */\nexport class MongoTransactionError extends MongoAPIError {\n  /**\n   * **Do not use this constructor!**\n   *\n   * Meant for internal use only.\n   *\n   * @remarks\n   * This class is only meant to be constructed within the driver. This constructor is\n   * not subject to semantic versioning compatibility guarantees and may change at any time.\n   *\n   * @public\n   **/\n  constructor(message: string) {\n    super(message);\n  }\n\n  override get name(): string {\n    return 'MongoTransactionError';\n  }\n}\n\n/**\n * An error generated when the user attempts to operate\n * on a session that has expired or has been closed.\n *\n * @public\n * @category Error\n */\nexport class MongoExpiredSessionError extends MongoAPIError {\n  /**\n   * **Do not use this constructor!**\n   *\n   * Meant for internal use only.\n   *\n   * @remarks\n   * This class is only meant to be constructed within the driver. This constructor is\n   * not subject to semantic versioning compatibility guarantees and may change at any time.\n   *\n   * @public\n   **/\n  constructor(message = 'Cannot use a session that has ended') {\n    super(message);\n  }\n\n  override get name(): string {\n    return 'MongoExpiredSessionError';\n  }\n}\n\n/**\n * A error generated when the user attempts to authenticate\n * via Kerberos, but fails to connect to the Kerberos client.\n *\n * @public\n * @category Error\n */\nexport class MongoKerberosError extends MongoRuntimeError {\n  /**\n   * **Do not use this constructor!**\n   *\n   * Meant for internal use only.\n   *\n   * @remarks\n   * This class is only meant to be constructed within the driver. This constructor is\n   * not subject to semantic versioning compatibility guarantees and may change at any time.\n   *\n   * @public\n   **/\n  constructor(message: string) {\n    super(message);\n  }\n\n  override get name(): string {\n    return 'MongoKerberosError';\n  }\n}\n\n/**\n * A error generated when the user attempts to authenticate\n * via AWS, but fails\n *\n * @public\n * @category Error\n */\nexport class MongoAWSError extends MongoRuntimeError {\n  /**\n   * **Do not use this constructor!**\n   *\n   * Meant for internal use only.\n   *\n   * @remarks\n   * This class is only meant to be constructed within the driver. This constructor is\n   * not subject to semantic versioning compatibility guarantees and may change at any time.\n   *\n   * @public\n   **/\n  constructor(message: string, options?: { cause?: Error }) {\n    super(message, options);\n  }\n\n  override get name(): string {\n    return 'MongoAWSError';\n  }\n}\n\n/**\n * A error generated when the user attempts to authenticate\n * via OIDC callbacks, but fails.\n *\n * @public\n * @category Error\n */\nexport class MongoOIDCError extends MongoRuntimeError {\n  /**\n   * **Do not use this constructor!**\n   *\n   * Meant for internal use only.\n   *\n   * @remarks\n   * This class is only meant to be constructed within the driver. This constructor is\n   * not subject to semantic versioning compatibility guarantees and may change at any time.\n   *\n   * @public\n   **/\n  constructor(message: string) {\n    super(message);\n  }\n\n  override get name(): string {\n    return 'MongoOIDCError';\n  }\n}\n\n/**\n * A error generated when the user attempts to authenticate\n * via Azure, but fails.\n *\n * @public\n * @category Error\n */\nexport class MongoAzureError extends MongoOIDCError {\n  /**\n   * **Do not use this constructor!**\n   *\n   * Meant for internal use only.\n   *\n   * @remarks\n   * This class is only meant to be constructed within the driver. This constructor is\n   * not subject to semantic versioning compatibility guarantees and may change at any time.\n   *\n   * @public\n   **/\n  constructor(message: string) {\n    super(message);\n  }\n\n  override get name(): string {\n    return 'MongoAzureError';\n  }\n}\n\n/**\n * A error generated when the user attempts to authenticate\n * via GCP, but fails.\n *\n * @public\n * @category Error\n */\nexport class MongoGCPError extends MongoOIDCError {\n  /**\n   * **Do not use this constructor!**\n   *\n   * Meant for internal use only.\n   *\n   * @remarks\n   * This class is only meant to be constructed within the driver. This constructor is\n   * not subject to semantic versioning compatibility guarantees and may change at any time.\n   *\n   * @public\n   **/\n  constructor(message: string) {\n    super(message);\n  }\n\n  override get name(): string {\n    return 'MongoGCPError';\n  }\n}\n\n/**\n * An error generated when a ChangeStream operation fails to execute.\n *\n * @public\n * @category Error\n */\nexport class MongoChangeStreamError extends MongoRuntimeError {\n  /**\n   * **Do not use this constructor!**\n   *\n   * Meant for internal use only.\n   *\n   * @remarks\n   * This class is only meant to be constructed within the driver. This constructor is\n   * not subject to semantic versioning compatibility guarantees and may change at any time.\n   *\n   * @public\n   **/\n  constructor(message: string) {\n    super(message);\n  }\n\n  override get name(): string {\n    return 'MongoChangeStreamError';\n  }\n}\n\n/**\n * An error thrown when the user calls a function or method not supported on a tailable cursor\n *\n * @public\n * @category Error\n */\nexport class MongoTailableCursorError extends MongoAPIError {\n  /**\n   * **Do not use this constructor!**\n   *\n   * Meant for internal use only.\n   *\n   * @remarks\n   * This class is only meant to be constructed within the driver. This constructor is\n   * not subject to semantic versioning compatibility guarantees and may change at any time.\n   *\n   * @public\n   **/\n  constructor(message = 'Tailable cursor does not support this operation') {\n    super(message);\n  }\n\n  override get name(): string {\n    return 'MongoTailableCursorError';\n  }\n}\n\n/** An error generated when a GridFSStream operation fails to execute.\n *\n * @public\n * @category Error\n */\nexport class MongoGridFSStreamError extends MongoRuntimeError {\n  /**\n   * **Do not use this constructor!**\n   *\n   * Meant for internal use only.\n   *\n   * @remarks\n   * This class is only meant to be constructed within the driver. This constructor is\n   * not subject to semantic versioning compatibility guarantees and may change at any time.\n   *\n   * @public\n   **/\n  constructor(message: string) {\n    super(message);\n  }\n\n  override get name(): string {\n    return 'MongoGridFSStreamError';\n  }\n}\n\n/**\n * An error generated when a malformed or invalid chunk is\n * encountered when reading from a GridFSStream.\n *\n * @public\n * @category Error\n */\nexport class MongoGridFSChunkError extends MongoRuntimeError {\n  /**\n   * **Do not use this constructor!**\n   *\n   * Meant for internal use only.\n   *\n   * @remarks\n   * This class is only meant to be constructed within the driver. This constructor is\n   * not subject to semantic versioning compatibility guarantees and may change at any time.\n   *\n   * @public\n   **/\n  constructor(message: string) {\n    super(message);\n  }\n\n  override get name(): string {\n    return 'MongoGridFSChunkError';\n  }\n}\n\n/**\n * An error generated when a **parsable** unexpected response comes from the server.\n * This is generally an error where the driver in a state expecting a certain behavior to occur in\n * the next message from MongoDB but it receives something else.\n * This error **does not** represent an issue with wire message formatting.\n *\n * #### Example\n * When an operation fails, it is the driver's job to retry it. It must perform serverSelection\n * again to make sure that it attempts the operation against a server in a good state. If server\n * selection returns a server that does not support retryable operations, this error is used.\n * This scenario is unlikely as retryable support would also have been determined on the first attempt\n * but it is possible the state change could report a selectable server that does not support retries.\n *\n * @public\n * @category Error\n */\nexport class MongoUnexpectedServerResponseError extends MongoRuntimeError {\n  /**\n   * **Do not use this constructor!**\n   *\n   * Meant for internal use only.\n   *\n   * @remarks\n   * This class is only meant to be constructed within the driver. This constructor is\n   * not subject to semantic versioning compatibility guarantees and may change at any time.\n   *\n   * @public\n   **/\n  constructor(message: string, options?: { cause?: Error }) {\n    super(message, options);\n  }\n\n  override get name(): string {\n    return 'MongoUnexpectedServerResponseError';\n  }\n}\n\n/**\n * An error thrown when the user attempts to add options to a cursor that has already been\n * initialized\n *\n * @public\n * @category Error\n */\nexport class MongoCursorInUseError extends MongoAPIError {\n  /**\n   * **Do not use this constructor!**\n   *\n   * Meant for internal use only.\n   *\n   * @remarks\n   * This class is only meant to be constructed within the driver. This constructor is\n   * not subject to semantic versioning compatibility guarantees and may change at any time.\n   *\n   * @public\n   **/\n  constructor(message = 'Cursor is already initialized') {\n    super(message);\n  }\n\n  override get name(): string {\n    return 'MongoCursorInUseError';\n  }\n}\n\n/**\n * An error generated when an attempt is made to operate\n * on a closed/closing server.\n *\n * @public\n * @category Error\n */\nexport class MongoServerClosedError extends MongoAPIError {\n  /**\n   * **Do not use this constructor!**\n   *\n   * Meant for internal use only.\n   *\n   * @remarks\n   * This class is only meant to be constructed within the driver. This constructor is\n   * not subject to semantic versioning compatibility guarantees and may change at any time.\n   *\n   * @public\n   **/\n  constructor(message = 'Server is closed') {\n    super(message);\n  }\n\n  override get name(): string {\n    return 'MongoServerClosedError';\n  }\n}\n\n/**\n * An error thrown when an attempt is made to read from a cursor that has been exhausted\n *\n * @public\n * @category Error\n */\nexport class MongoCursorExhaustedError extends MongoAPIError {\n  /**\n   * **Do not use this constructor!**\n   *\n   * Meant for internal use only.\n   *\n   * @remarks\n   * This class is only meant to be constructed within the driver. This constructor is\n   * not subject to semantic versioning compatibility guarantees and may change at any time.\n   *\n   * @public\n   **/\n  constructor(message?: string) {\n    super(message || 'Cursor is exhausted');\n  }\n\n  override get name(): string {\n    return 'MongoCursorExhaustedError';\n  }\n}\n\n/**\n * An error generated when an attempt is made to operate on a\n * dropped, or otherwise unavailable, database.\n *\n * @public\n * @category Error\n */\nexport class MongoTopologyClosedError extends MongoAPIError {\n  /**\n   * **Do not use this constructor!**\n   *\n   * Meant for internal use only.\n   *\n   * @remarks\n   * This class is only meant to be constructed within the driver. This constructor is\n   * not subject to semantic versioning compatibility guarantees and may change at any time.\n   *\n   * @public\n   **/\n  constructor(message = 'Topology is closed') {\n    super(message);\n  }\n\n  override get name(): string {\n    return 'MongoTopologyClosedError';\n  }\n}\n\n/** @internal */\nconst kBeforeHandshake = Symbol('beforeHandshake');\nexport function isNetworkErrorBeforeHandshake(err: MongoNetworkError): boolean {\n  return err[kBeforeHandshake] === true;\n}\n\n/** @public */\nexport interface MongoNetworkErrorOptions {\n  /** Indicates the timeout happened before a connection handshake completed */\n  beforeHandshake?: boolean;\n  cause?: Error;\n}\n\n/**\n * An error indicating an issue with the network, including TCP errors and timeouts.\n * @public\n * @category Error\n */\nexport class MongoNetworkError extends MongoError {\n  /** @internal */\n  [kBeforeHandshake]?: boolean;\n\n  /**\n   * **Do not use this constructor!**\n   *\n   * Meant for internal use only.\n   *\n   * @remarks\n   * This class is only meant to be constructed within the driver. This constructor is\n   * not subject to semantic versioning compatibility guarantees and may change at any time.\n   *\n   * @public\n   **/\n  constructor(message: string, options?: MongoNetworkErrorOptions) {\n    super(message, { cause: options?.cause });\n\n    if (options && typeof options.beforeHandshake === 'boolean') {\n      this[kBeforeHandshake] = options.beforeHandshake;\n    }\n  }\n\n  override get name(): string {\n    return 'MongoNetworkError';\n  }\n}\n\n/**\n * An error indicating a network timeout occurred\n * @public\n * @category Error\n *\n * @privateRemarks\n * mongodb-client-encryption has a dependency on this error with an instanceof check\n */\nexport class MongoNetworkTimeoutError extends MongoNetworkError {\n  /**\n   * **Do not use this constructor!**\n   *\n   * Meant for internal use only.\n   *\n   * @remarks\n   * This class is only meant to be constructed within the driver. This constructor is\n   * not subject to semantic versioning compatibility guarantees and may change at any time.\n   *\n   * @public\n   **/\n  constructor(message: string, options?: MongoNetworkErrorOptions) {\n    super(message, options);\n  }\n\n  override get name(): string {\n    return 'MongoNetworkTimeoutError';\n  }\n}\n\n/**\n * An error used when attempting to parse a value (like a connection string)\n * @public\n * @category Error\n */\nexport class MongoParseError extends MongoDriverError {\n  /**\n   * **Do not use this constructor!**\n   *\n   * Meant for internal use only.\n   *\n   * @remarks\n   * This class is only meant to be constructed within the driver. This constructor is\n   * not subject to semantic versioning compatibility guarantees and may change at any time.\n   *\n   * @public\n   **/\n  constructor(message: string) {\n    super(message);\n  }\n\n  override get name(): string {\n    return 'MongoParseError';\n  }\n}\n\n/**\n * An error generated when the user supplies malformed or unexpected arguments\n * or when a required argument or field is not provided.\n *\n *\n * @public\n * @category Error\n */\nexport class MongoInvalidArgumentError extends MongoAPIError {\n  /**\n   * **Do not use this constructor!**\n   *\n   * Meant for internal use only.\n   *\n   * @remarks\n   * This class is only meant to be constructed within the driver. This constructor is\n   * not subject to semantic versioning compatibility guarantees and may change at any time.\n   *\n   * @public\n   **/\n  constructor(message: string) {\n    super(message);\n  }\n\n  override get name(): string {\n    return 'MongoInvalidArgumentError';\n  }\n}\n\n/**\n * An error generated when a feature that is not enabled or allowed for the current server\n * configuration is used\n *\n *\n * @public\n * @category Error\n */\nexport class MongoCompatibilityError extends MongoAPIError {\n  /**\n   * **Do not use this constructor!**\n   *\n   * Meant for internal use only.\n   *\n   * @remarks\n   * This class is only meant to be constructed within the driver. This constructor is\n   * not subject to semantic versioning compatibility guarantees and may change at any time.\n   *\n   * @public\n   **/\n  constructor(message: string) {\n    super(message);\n  }\n\n  override get name(): string {\n    return 'MongoCompatibilityError';\n  }\n}\n\n/**\n * An error generated when the user fails to provide authentication credentials before attempting\n * to connect to a mongo server instance.\n *\n *\n * @public\n * @category Error\n */\nexport class MongoMissingCredentialsError extends MongoAPIError {\n  /**\n   * **Do not use this constructor!**\n   *\n   * Meant for internal use only.\n   *\n   * @remarks\n   * This class is only meant to be constructed within the driver. This constructor is\n   * not subject to semantic versioning compatibility guarantees and may change at any time.\n   *\n   * @public\n   **/\n  constructor(message: string) {\n    super(message);\n  }\n\n  override get name(): string {\n    return 'MongoMissingCredentialsError';\n  }\n}\n\n/**\n * An error generated when a required module or dependency is not present in the local environment\n *\n * @public\n * @category Error\n */\nexport class MongoMissingDependencyError extends MongoAPIError {\n  dependencyName: string;\n\n  /** @remarks This property is assigned in the `Error` constructor. */\n  declare cause: Error;\n\n  /**\n   * **Do not use this constructor!**\n   *\n   * Meant for internal use only.\n   *\n   * @remarks\n   * This class is only meant to be constructed within the driver. This constructor is\n   * not subject to semantic versioning compatibility guarantees and may change at any time.\n   *\n   * @public\n   **/\n  constructor(message: string, options: { cause: Error; dependencyName: string }) {\n    super(message, options);\n    this.dependencyName = options.dependencyName;\n  }\n\n  override get name(): string {\n    return 'MongoMissingDependencyError';\n  }\n}\n/**\n * An error signifying a general system issue\n * @public\n * @category Error\n */\nexport class MongoSystemError extends MongoError {\n  /** An optional reason context, such as an error saved during flow of monitoring and selecting servers */\n  reason?: TopologyDescription;\n\n  /**\n   * **Do not use this constructor!**\n   *\n   * Meant for internal use only.\n   *\n   * @remarks\n   * This class is only meant to be constructed within the driver. This constructor is\n   * not subject to semantic versioning compatibility guarantees and may change at any time.\n   *\n   * @public\n   **/\n  constructor(message: string, reason: TopologyDescription) {\n    if (reason && reason.error) {\n      super(MongoError.buildErrorMessage(reason.error.message || reason.error), {\n        cause: reason.error\n      });\n    } else {\n      super(message);\n    }\n\n    if (reason) {\n      this.reason = reason;\n    }\n\n    this.code = reason.error?.code;\n  }\n\n  override get name(): string {\n    return 'MongoSystemError';\n  }\n}\n\n/**\n * An error signifying a client-side server selection error\n * @public\n * @category Error\n */\nexport class MongoServerSelectionError extends MongoSystemError {\n  /**\n   * **Do not use this constructor!**\n   *\n   * Meant for internal use only.\n   *\n   * @remarks\n   * This class is only meant to be constructed within the driver. This constructor is\n   * not subject to semantic versioning compatibility guarantees and may change at any time.\n   *\n   * @public\n   **/\n  constructor(message: string, reason: TopologyDescription) {\n    super(message, reason);\n  }\n\n  override get name(): string {\n    return 'MongoServerSelectionError';\n  }\n}\n\n/**\n * The type of the result property of MongoWriteConcernError\n * @public\n */\nexport interface WriteConcernErrorResult {\n  writeConcernError: {\n    code: number;\n    errmsg: string;\n    codeName?: string;\n    errInfo?: Document;\n  };\n  ok: number;\n  code?: number;\n  errorLabels?: string[];\n  [x: string | number]: unknown;\n}\n\n/**\n * An error thrown when the server reports a writeConcernError\n * @public\n * @category Error\n */\nexport class MongoWriteConcernError extends MongoServerError {\n  /** The result document */\n  result: Document;\n\n  /**\n   * **Do not use this constructor!**\n   *\n   * Meant for internal use only.\n   *\n   * @remarks\n   * This class is only meant to be constructed within the driver. This constructor is\n   * not subject to semantic versioning compatibility guarantees and may change at any time.\n   *\n   * @public\n   **/\n  constructor(result: WriteConcernErrorResult) {\n    super({ ...result.writeConcernError, ...result });\n    this.errInfo = result.writeConcernError.errInfo;\n    this.result = result;\n  }\n\n  override get name(): string {\n    return 'MongoWriteConcernError';\n  }\n}\n\n// https://github.com/mongodb/specifications/blob/master/source/retryable-reads/retryable-reads.rst#retryable-error\nconst RETRYABLE_READ_ERROR_CODES = new Set<number>([\n  MONGODB_ERROR_CODES.HostUnreachable,\n  MONGODB_ERROR_CODES.HostNotFound,\n  MONGODB_ERROR_CODES.NetworkTimeout,\n  MONGODB_ERROR_CODES.ShutdownInProgress,\n  MONGODB_ERROR_CODES.PrimarySteppedDown,\n  MONGODB_ERROR_CODES.SocketException,\n  MONGODB_ERROR_CODES.NotWritablePrimary,\n  MONGODB_ERROR_CODES.InterruptedAtShutdown,\n  MONGODB_ERROR_CODES.InterruptedDueToReplStateChange,\n  MONGODB_ERROR_CODES.NotPrimaryNoSecondaryOk,\n  MONGODB_ERROR_CODES.NotPrimaryOrSecondary,\n  MONGODB_ERROR_CODES.ExceededTimeLimit,\n  MONGODB_ERROR_CODES.ReadConcernMajorityNotAvailableYet\n]);\n\n// see: https://github.com/mongodb/specifications/blob/master/source/retryable-writes/retryable-writes.rst#terms\nconst RETRYABLE_WRITE_ERROR_CODES = RETRYABLE_READ_ERROR_CODES;\n\nexport function needsRetryableWriteLabel(\n  error: Error,\n  maxWireVersion: number,\n  serverType: ServerType\n): boolean {\n  // pre-4.4 server, then the driver adds an error label for every valid case\n  // execute operation will only inspect the label, code/message logic is handled here\n  if (error instanceof MongoNetworkError) {\n    return true;\n  }\n\n  if (error instanceof MongoError) {\n    if (\n      (maxWireVersion >= 9 || isRetryableWriteError(error)) &&\n      !error.hasErrorLabel(MongoErrorLabel.HandshakeError)\n    ) {\n      // If we already have the error label no need to add it again. 4.4+ servers add the label.\n      // In the case where we have a handshake error, need to fall down to the logic checking\n      // the codes.\n      return false;\n    }\n  }\n\n  if (error instanceof MongoWriteConcernError) {\n    if (serverType === 'Mongos' && maxWireVersion < 9) {\n      // use original top-level code from server response\n      return RETRYABLE_WRITE_ERROR_CODES.has(error.result.code ?? 0);\n    }\n    const code = error.result.writeConcernError.code ?? Number(error.code);\n    return RETRYABLE_WRITE_ERROR_CODES.has(Number.isNaN(code) ? 0 : code);\n  }\n\n  if (error instanceof MongoError) {\n    return RETRYABLE_WRITE_ERROR_CODES.has(Number(error.code));\n  }\n\n  const isNotWritablePrimaryError = LEGACY_NOT_WRITABLE_PRIMARY_ERROR_MESSAGE.test(error.message);\n  if (isNotWritablePrimaryError) {\n    return true;\n  }\n\n  const isNodeIsRecoveringError = NODE_IS_RECOVERING_ERROR_MESSAGE.test(error.message);\n  if (isNodeIsRecoveringError) {\n    return true;\n  }\n\n  return false;\n}\n\nexport function isRetryableWriteError(error: MongoError): boolean {\n  return (\n    error.hasErrorLabel(MongoErrorLabel.RetryableWriteError) ||\n    error.hasErrorLabel(MongoErrorLabel.PoolRequstedRetry)\n  );\n}\n\n/** Determines whether an error is something the driver should attempt to retry */\nexport function isRetryableReadError(error: MongoError): boolean {\n  const hasRetryableErrorCode =\n    typeof error.code === 'number' ? RETRYABLE_READ_ERROR_CODES.has(error.code) : false;\n  if (hasRetryableErrorCode) {\n    return true;\n  }\n\n  if (error instanceof MongoNetworkError) {\n    return true;\n  }\n\n  const isNotWritablePrimaryError = LEGACY_NOT_WRITABLE_PRIMARY_ERROR_MESSAGE.test(error.message);\n  if (isNotWritablePrimaryError) {\n    return true;\n  }\n\n  const isNodeIsRecoveringError = NODE_IS_RECOVERING_ERROR_MESSAGE.test(error.message);\n  if (isNodeIsRecoveringError) {\n    return true;\n  }\n\n  return false;\n}\n\nconst SDAM_RECOVERING_CODES = new Set<number>([\n  MONGODB_ERROR_CODES.ShutdownInProgress,\n  MONGODB_ERROR_CODES.PrimarySteppedDown,\n  MONGODB_ERROR_CODES.InterruptedAtShutdown,\n  MONGODB_ERROR_CODES.InterruptedDueToReplStateChange,\n  MONGODB_ERROR_CODES.NotPrimaryOrSecondary\n]);\n\nconst SDAM_NOT_PRIMARY_CODES = new Set<number>([\n  MONGODB_ERROR_CODES.NotWritablePrimary,\n  MONGODB_ERROR_CODES.NotPrimaryNoSecondaryOk,\n  MONGODB_ERROR_CODES.LegacyNotPrimary\n]);\n\nconst SDAM_NODE_SHUTTING_DOWN_ERROR_CODES = new Set<number>([\n  MONGODB_ERROR_CODES.InterruptedAtShutdown,\n  MONGODB_ERROR_CODES.ShutdownInProgress\n]);\n\nfunction isRecoveringError(err: MongoError) {\n  if (typeof err.code === 'number') {\n    // If any error code exists, we ignore the error.message\n    return SDAM_RECOVERING_CODES.has(err.code);\n  }\n\n  return (\n    LEGACY_NOT_PRIMARY_OR_SECONDARY_ERROR_MESSAGE.test(err.message) ||\n    NODE_IS_RECOVERING_ERROR_MESSAGE.test(err.message)\n  );\n}\n\nfunction isNotWritablePrimaryError(err: MongoError) {\n  if (typeof err.code === 'number') {\n    // If any error code exists, we ignore the error.message\n    return SDAM_NOT_PRIMARY_CODES.has(err.code);\n  }\n\n  if (isRecoveringError(err)) {\n    return false;\n  }\n\n  return LEGACY_NOT_WRITABLE_PRIMARY_ERROR_MESSAGE.test(err.message);\n}\n\nexport function isNodeShuttingDownError(err: MongoError): boolean {\n  return !!(typeof err.code === 'number' && SDAM_NODE_SHUTTING_DOWN_ERROR_CODES.has(err.code));\n}\n\n/**\n * Determines whether SDAM can recover from a given error. If it cannot\n * then the pool will be cleared, and server state will completely reset\n * locally.\n *\n * @see https://github.com/mongodb/specifications/blob/master/source/server-discovery-and-monitoring/server-discovery-and-monitoring.rst#not-master-and-node-is-recovering\n */\nexport function isSDAMUnrecoverableError(error: MongoError): boolean {\n  // NOTE: null check is here for a strictly pre-CMAP world, a timeout or\n  //       close event are considered unrecoverable\n  if (error instanceof MongoParseError || error == null) {\n    return true;\n  }\n\n  return isRecoveringError(error) || isNotWritablePrimaryError(error);\n}\n\nexport function isNetworkTimeoutError(err: MongoError): err is MongoNetworkError {\n  return !!(err instanceof MongoNetworkError && err.message.match(/timed out/));\n}\n\nexport function isResumableError(error?: Error, wireVersion?: number): boolean {\n  if (error == null || !(error instanceof MongoError)) {\n    return false;\n  }\n\n  if (error instanceof MongoNetworkError) {\n    return true;\n  }\n\n  if (wireVersion != null && wireVersion >= 9) {\n    // DRIVERS-1308: For 4.4 drivers running against 4.4 servers, drivers will add a special case to treat the CursorNotFound error code as resumable\n    if (error.code === MONGODB_ERROR_CODES.CursorNotFound) {\n      return true;\n    }\n    return error.hasErrorLabel(MongoErrorLabel.ResumableChangeStreamError);\n  }\n\n  if (typeof error.code === 'number') {\n    return GET_MORE_RESUMABLE_CODES.has(error.code);\n  }\n\n  return false;\n}\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"script","externalDependencies":[]}